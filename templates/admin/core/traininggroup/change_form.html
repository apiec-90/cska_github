{% extends "admin/change_form.html" %}
{% load i18n admin_urls %}

{% block content %}
  {% if original %}
    <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
      <h3 style="margin-bottom: 15px;">üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–æ–π</h3>
      <div style="display: flex; gap: 10px;">
        <a href="{% url 'admin:core_traininggroup_info' original.pk %}" class="btn btn-info" style="color: white; text-decoration: none; padding: 10px 16px; border-radius: 4px; background-color: #17a2b8;">
          <i class="fas fa-users"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ
        </a>
        <a href="{% url 'admin:core_traininggroup_journal' original.pk %}" class="btn btn-success" style="color: white; text-decoration: none; padding: 10px 16px; border-radius: 4px; background-color: #28a745;">
          <i class="fas fa-clipboard-list"></i> –ñ—É—Ä–Ω–∞–ª –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
        </a>
        <form method="post" action="{% url 'admin:core_traininggroup_generate_sessions' original.pk %}" style="display: inline;">
          {% csrf_token %}
          <input type="hidden" name="months" value="2">
          <button type="submit" class="btn btn-warning" style="color: white; text-decoration: none; padding: 10px 16px; border-radius: 4px; background-color: #ffc107; border: none;" onclick="return confirm('–°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –Ω–∞ 2 –º–µ—Å—è—Ü–∞ –≤–ø–µ—Ä–µ–¥?')">
            <i class="fas fa-calendar-plus"></i> –°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏–∏ (2 –º–µ—Å.)
          </button>
        </form>
      </div>
    </div>
  {% endif %}
  {{ block.super }}
{% endblock %}

{% block object-tools-items %}
  {{ block.super }}
  {% if original %}
    <li>
      <a href="{% url 'admin:core_traininggroup_info' original.pk %}" class="btn btn-info" style="color: white; text-decoration: none; padding: 8px 16px; border-radius: 4px; background-color: #17a2b8; margin-right: 10px;">
        <i class="fas fa-users"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ
      </a>
    </li>
    <li>
      <a href="{% url 'admin:core_traininggroup_journal' original.pk %}" class="btn btn-success" style="color: white; text-decoration: none; padding: 8px 16px; border-radius: 4px; background-color: #28a745;">
        <i class="fas fa-clipboard-list"></i> –ñ—É—Ä–Ω–∞–ª –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
      </a>
    </li>
  {% endif %}
{% endblock %}

{% block after_related_objects %}
  {% if original and group_schedules %}
    <div class="module" style="margin-top: 20px;">
      <h2>üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</h2>
      <div class="results">
        <table id="result_list" style="width: 100%;">
          <thead>
            <tr>
              <th scope="col">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏</th>
              <th scope="col">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞</th>
              <th scope="col">–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è</th>
              <th scope="col">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
          </thead>
          <tbody>
            {% for schedule in group_schedules %}
              <tr class="{% cycle 'row1' 'row2' %}">
                <td>
                  {% if schedule.weekday == 1 %}–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
                  {% elif schedule.weekday == 2 %}–í—Ç–æ—Ä–Ω–∏–∫
                  {% elif schedule.weekday == 3 %}–°—Ä–µ–¥–∞
                  {% elif schedule.weekday == 4 %}–ß–µ—Ç–≤–µ—Ä–≥
                  {% elif schedule.weekday == 5 %}–ü—è—Ç–Ω–∏—Ü–∞
                  {% elif schedule.weekday == 6 %}–°—É–±–±–æ—Ç–∞
                  {% elif schedule.weekday == 7 %}–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
                  {% endif %}
                </td>
                <td>{{ schedule.start_time }}</td>
                <td>{{ schedule.end_time }}</td>
                <td>
                  <a href="{% url 'admin:core_groupschedule_change' schedule.pk %}" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                    <i class="fas fa-edit"></i>
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="module" style="margin-top: 10px;">
        <a href="{% url 'admin:core_groupschedule_add' %}?training_group={{ original.pk }}" class="btn btn-primary" style="color: white; text-decoration: none; padding: 8px 16px; border-radius: 4px; background-color: #007cba;">
          <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        </a>
      </div>
    </div>
  {% elif original %}
    <div class="module" style="margin-top: 20px;">
      <h2>üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã</h2>
      <p>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —ç—Ç–æ–π –≥—Ä—É–ø–ø—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ.</p>
      <div class="module" style="margin-top: 10px;">
        <a href="{% url 'admin:core_groupschedule_add' %}?training_group={{ original.pk }}" class="btn btn-primary" style="color: white; text-decoration: none; padding: 8px 16px; border-radius: 4px; background-color: #007cba;">
          <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        </a>
      </div>
    </div>
  {% endif %}
{% endblock %}