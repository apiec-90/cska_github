{% extends "admin/base_site.html" %}
{% block extrastyle %}
<style>
  .schedule-form { max-width: 600px; margin: 20px 0; }
  .time-inputs { display: flex; gap: 20px; margin: 15px 0; }
  .time-group label { display: block; margin-bottom: 5px; font-weight: bold; }
  .weekday-checkboxes { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin: 15px 0; }
  .weekday-checkboxes label { display: flex; align-items: center; gap: 8px; }
  .preview-list { background: #f8f9fa; padding: 15px; border-radius: 6px; margin-top: 20px; }
  .preview-list h3 { margin-top: 0; color: #495057; }
</style>
{% endblock %}

{% block content %}
<h1>{{ title }}</h1>
<p><a class="button" href="{% url 'admin:core_traininggroup_panel' group.pk %}">Назад к группе</a></p>

<div class="schedule-form">
  <form method="post">
    {% csrf_token %}
    
    <h3>Дни недели</h3>
    <div class="weekday-checkboxes">
      {% for value, label in weekday_choices %}
        <label>
          <input type="checkbox" name="weekdays" value="{{ value }}" 
                 {% if value in current_weekdays %}checked{% endif %}>
          {{ label }}
        </label>
      {% endfor %}
    </div>

    <div class="time-inputs">
      <div class="time-group">
        <label for="start_time">Время начала:</label>
        <input type="time" id="start_time" name="start_time" 
               value="{{ current_start_time|time:'H:i' }}" required>
      </div>
      
      <div class="time-group">
        <label for="end_time">Время окончания:</label>
        <input type="time" id="end_time" name="end_time" 
               value="{{ current_end_time|time:'H:i' }}" required>
      </div>
    </div>

    <button class="button default" type="submit">Сохранить расписание</button>
  </form>
</div>

<div class="preview-list">
  <h3>Превью текущего месяца</h3>
  <ul>
    {% for d, st, et in preview %}
      <li>{{ d }} {{ st }}–{{ et }}</li>
    {% empty %}
      <li>В этом месяце по расписанию занятий нет</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
