from django.core.management.base import BaseCommand
from django.contrib.auth.models import Group


class Command(BaseCommand):
    help = '–°–æ–∑–¥–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã –±–µ–∑ –¥–æ–ø—É—Å–∫–æ–≤ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã —Å –¥–æ–ø—É—Å–∫–∞–º–∏'

    def handle(self, *args, **options):
        self.stdout.write('–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –≥—Ä—É–ø–ø...')
        
        # –°–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã (–±–µ–∑ –¥–æ–ø—É—Å–∫–æ–≤)
        base_groups = ['–°–ø–æ—Ä—Ç—Å–º–µ–Ω—ã', '–†–æ–¥–∏—Ç–µ–ª–∏', '–¢—Ä–µ–Ω–µ—Ä—ã', '–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏']
        
        for group_name in base_groups:
            group, created = Group.objects.get_or_create(name=group_name)
            if created:
                self.stdout.write(f'‚úì –°–æ–∑–¥–∞–Ω–∞ –≥—Ä—É–ø–ø–∞: {group_name}')
            else:
                self.stdout.write(f'‚úì –ì—Ä—É–ø–ø–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {group_name}')
            
            # –û—á–∏—â–∞–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–∑ –±–∞–∑–æ–≤—ã—Ö –≥—Ä—É–ø–ø
            if group.permissions.exists():
                group.permissions.clear()
                self.stdout.write(f'  ‚Üí –û—á–∏—â–µ–Ω—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø—ã: {group_name}')
        
        # –°–æ–∑–¥–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã –¥–ª—è staff
        staff_groups = ['–ú–µ–Ω–µ–¥–∂–µ—Ä—ã', '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã']
        
        for group_name in staff_groups:
            group, created = Group.objects.get_or_create(name=group_name)
            if created:
                self.stdout.write(f'‚úì –°–æ–∑–¥–∞–Ω–∞ –≥—Ä—É–ø–ø–∞: {group_name}')
            else:
                self.stdout.write(f'‚úì –ì—Ä—É–ø–ø–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {group_name}')
        
        self.stdout.write(
            self.style.SUCCESS(
                '\n‚úÖ –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥—Ä—É–ø–ø –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞!\n'
                'üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞:\n'
                '  ‚Ä¢ –ë–∞–∑–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã (–±–µ–∑ –¥–æ–ø—É—Å–∫–æ–≤): –°–ø–æ—Ä—Ç—Å–º–µ–Ω—ã, –†–æ–¥–∏—Ç–µ–ª–∏, –¢—Ä–µ–Ω–µ—Ä—ã, –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏\n'
                '  ‚Ä¢ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã (—Å –¥–æ–ø—É—Å–∫–∞–º–∏): –ú–µ–Ω–µ–¥–∂–µ—Ä—ã, –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã\n'
                '  ‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –±–∞–∑–æ–≤—É—é –≥—Ä—É–ø–ø—É + —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é (–¥–ª—è staff)\n\n'
                'üí° –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:\n'
                '  1. –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã –≤ –∞–¥–º–∏–Ω–∫–µ\n'
                '  2. –ù–∞–∑–Ω–∞—á–∞—Ç—å –¥–æ–ø—É—Å–∫–∏ —Ç–æ–ª—å–∫–æ –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø–∞—Ö\n'
                '  3. –û–±–Ω–æ–≤–ª—è—Ç—å –º–∞–ø–ø–∏–Ω–≥ –≤ core/utils.py –¥–ª—è –Ω–æ–≤—ã—Ö –≥—Ä—É–ø–ø'
            )
        )




